Biblioteca SQL questions:


1.)
Who checked out the book?
Anand Beck

SQL:
SELECT name FROM member WHERE id IN (select member_id FROM checkout_item WHERE book_id IN (SELECT id FROM book WHERE title = 'The Hobbit') ) OR id IN (SELECT member_id FROM checkout_item WHERE movie_id IN (SELECT id FROM movie WHERE title = 'The Hobbit') );


2.)
How many people havn’t checked anything out?
37

SQL:
SELECT COUNT (name) FROM member WHERE id NOT IN (SELECT member_id FROM checkout_item WHERE 1=1);


3.)
What books and moves aren’t checked out?
1984
Catcher in the Rye
Crouching Tiger, Hidden Dragon
Domain Driven Design
Fellowship of the Ring
Lawrence of Arabia
Office Space
Thin Red Line
To Kill a Mockingbird
Tom Sawyer

SQL:
SELECT title FROM movie WHERE id NOT IN (SELECT movie_id FROM checkout_item WHERE movie_id != "") UNION SELECT title FROM book WHERE id NOT IN (SELECT book_id FROM checkout_item WHERE book_id != "");


4.)
Inserting myself into the DB:
INSERT INTO member (id, name) VALUES ((SELECT MAX(id) FROM member) +1, "James Cotcher");

Inserting the book into the DB:
INSERT INTO book (id, title) VALUES ((SELECT MAX(id) FROM book) +1, "The Pragmatic Programmer");

Inserting the checkout into the DB:
INSERT INTO checkout_item (member_id, book_id) VALUES ((SELECT id FROM member WHERE name = 'James Cotcher'), (SELECT id FROM book WHERE title = 'The Pragmatic Programmer'));

Checking that I have checked the book out:
SELECT name FROM member WHERE id IN (Select member_id FROM checkout_item WHERE book_id IN (SELECT id FROM book WHERE title = 'The Pragmatic Programmer'));

Answer:
James Cotcher

5.)
Who has checked out more than one item?
Anand Beck
Frank Smith

SQL:
SELECT name FROM member WHERE id IN ((SELECT member_id FROM checkout_item GROUP BY member_id HAVING COUNT(book_id) > 0) AND id IN (SELECT member_id FROM checkout_item GROUP BY member_id HAVING COUNT(movie_id) > 0)) OR id IN (SELECT member_id FROM checkout_item GROUP BY member_id HAVING COUNT(book_id) > 1) OR id IN (SELECT member_id FROM checkout_item GROUP BY member_id HAVING COUNT(movie_id) > 1);




